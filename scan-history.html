<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scan History</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#0a0f1c; color:#d7eaff; font-family:'Segoe UI'; }
    .sidebar { width:260px; background:#0e1423; height:100vh; padding:20px; border-right:1px solid #1f2d4a; position:fixed; }
    .sidebar h2 { font-size:1.6rem; color:#4ecbff; margin-bottom:30px; }
    .sidebar .nav-link { color:#9fc7ff; padding:12px; border-radius:6px; margin-bottom:5px; }
    .sidebar .nav-link.active, .sidebar .nav-link:hover { background:#132544; color:#4ecbff; }
    .main-content { margin-left:280px; padding:30px; }
    .card-custom { background:rgba(19,29,58,0.7); border:1px solid #2a3d68; border-radius:12px; padding:20px; }
    .history-item { border-bottom:1px solid #2a3d68; padding:8px 0; font-size:14px; }
  </style>
</head>
<body>
<div class="sidebar">
  <h2>Web Traffic Simulations</h2>
  <a class="nav-link" href="index.html">Dashboard</a>
  <a class="nav-link" href="sdfa.html">Attack Configuration</a>
  <a class="nav-link active" href="scan-history.html">Scan History</a>
</div>

<div class="main-content">
  <div class="card-custom">
    <h4>Scan History</h4>
    <div id="historyList" class="mt-3"></div>
  </div>
</div>

<script src="api.js"></script>
<script>
  function renderHistory() {
    const history = loadHistory();
    const box = document.getElementById("historyList");
    if (!history.length) {
      box.innerHTML = "<p class='text-muted'>No history yet. Run some tests from the Attack Configuration page.</p>";
      return;
    }
    let html = "";
    for (const e of history) {
      if (e.type === "nmap") {
        html += `<div class="history-item">
                   <strong>Nmap</strong> on de>${e.target}</code>
                   <div class="text-muted">${e.timestamp}</div>
                   Exit code: ${e.exit_code}
                 </div>`;
      } else if (e.type === "http-load") {
        html += `<div class="history-item">
                   <strong>HTTP Load</strong> on <e>${e.url}</code>
                   <div class="text-muted">${e.timestamp}</div>
                   Requests: ${e.requests}, Success: ${e.success}, Failures: ${e.failures}
                 </div>`;
      }
    }
    box.innerHTML = html;
  }

  document.addEventListener("DOMContentLoaded", renderHistory);
</script>
</body>
</html>
